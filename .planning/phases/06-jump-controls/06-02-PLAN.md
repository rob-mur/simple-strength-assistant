---
gap_closure: true
---
# Plan: Phase 6 Gap Closure (Jump Controls Refinement)

## Identified Issues
1. **Sync Problem:** `TapeMeasure` does not always update its scroll position when `props.value` is changed externally (via buttons).
2. **UI Crowding:** Too many buttons for weight; buttons are cramped in the center.
3. **Layout Preference:** Buttons should be spaced apart (Decrease on left, Increase on right).
4. **Invalid Increments:** Buttons allow setting values that are not multiples of the exercise's default step.

## Proposed Changes

### 1. `src/components/tape_measure.rs`
- **Fix Sync Logic:** Loosen the condition in the `use_effect` to always sync when `!is_dragging` and `!is_snapping`. The `velocity == 0.0` check is likely too strict and preventing updates.
- **Immediate Update:** Ensure `offset` is updated immediately when `props.value` changes.

### 2. `src/components/step_controls.rs`
- **New Layout:** Change from `join` (compact group) to a spread layout using `flex justify-between`.
- **Labels:** Optionally use icons or clearer text for decrease/increase.
- **Consistency:** Ensure the component supports a clearer "Left/Right" visual distinction.

### 3. `src/app.rs` (ActiveSession)
- **Simplify Weight Buttons:** Reduce to a more focused set, e.g., `[-1, +1]` (using exercise steps) and a single "Big Step" (e.g., ±10kg or ±4 steps).
- **Dynamic Steps:** Pass steps to `StepControls` that are multiples of the exercise's `increment` (e.g., `vec![-2.0, -1.0, 1.0, 2.0]` where each is multiplied by `step`).
- **Reps Buttons:** Keep `[-1.0, 1.0]` as they are already aligned with Reps increment.

## Verification Plan
1. **Automated:** Ensure `cargo test` passes.
2. **Manual:**
   - Verify tapping `+10` (or big step) moves the TapeMeasure.
   - Verify the buttons are on the sides of the screen.
   - Verify the values stay consistent with the exercise increment.

# Plan: Jump & Step Controls (Phase 6)

## Objective
Implement "Big Step" and "Small Step" buttons for rapid adjustment of weight and reps, complementing the Tape Measure component and providing a high-speed "no-typing" interface.

## Context
Phase 4 (Tape Measure) and Phase 5 (RPE Slider) are complete. Phase 6 adds quick-jump buttons that modify the same signals used by the Tape Measure.

### Contextual Requirements
- STEP-01: Big Step buttons (±5, ±10, ±25 for weight)
- STEP-02: Small Step buttons (±1 for reps/weight)
- Buttons must respect `min` and `max` bounds.
- UI must be thumb-friendly and integrated into the `ActiveSession` view.

### Dependencies
- `TapeMeasure` component (for visual sync).
- `ActiveSession` UI (for integration).

## Proposed Changes

### 1. New Component: `src/components/step_controls.rs`
- Create a reusable `StepControls` component.
- Props:
  - `value: f64`: Current value.
  - `steps: Vec<f64>`: List of relative adjustments (e.g., `-10.0`, `+10.0`).
  - `min: f64`: Minimum allowed value.
  - `max: f64`: Maximum allowed value.
  - `on_change: EventHandler<f64>`: Callback for new value.
- UI: Use DaisyUI `join` and `btn` classes for a cohesive button group.
- Logic: `new_value = (value + step).clamp(min, max)`.

### 2. Integration in `src/components/mod.rs`
- Export `step_controls`.

### 3. Integration in `src/app.rs`
- Update `ActiveSession` to include `StepControls` for both Weight and Reps.
- **Weight Controls:**
  - Steps: `[-25, -10, -5, -1, 1, 5, 10, 25]` (combining Big and Small steps).
  - Position: Below the weight value display.
- **Reps Controls:**
  - Steps: `[-1, 1]` (Small steps).
  - Position: Below the reps value display.

## Verification Plan

### Automated Tests
- Unit tests for `StepControls` logic (clamping, event firing).
- Integration test in `src/state/db_tests.rs` or similar (if applicable) to ensure buttons correctly update state (though this is mostly UI logic).

### Manual Verification
1. Open the app and start a weighted exercise.
2. **Weight Testing:**
   - Tap `+25`: Verify weight increases by 25 and `TapeMeasure` moves.
   - Tap `-10`: Verify weight decreases by 10.
   - Tap buttons until `min` is reached: Verify it doesn't go below `min`.
   - Tap `+1`: Verify it increments by 1 (Note: if `TapeMeasure` step is > 1, it will snap to nearest increment upon next interaction).
3. **Reps Testing:**
   - Tap `+1`: Verify reps increase.
   - Tap `-1`: Verify reps decrease.
4. Log a set and verify the values in the "Completed Sets" table match.
---
wave: 3
depends_on: [ "05-02" ]
files_modified:
  - src/components/library_view.rs
  - tests/steps/exercise_search_steps.rs
  - tests/exercise_search_bdd.rs
autonomous: true
---

# Phase 05-03: Search Filtering Component and Empty States

## Goal
Implement instant text-based search functionality within the `LibraryView` component using Dioxus signals. Connect these features to the `@unit` BDD tests from `exercise_search.feature` to ensure correctness.

## Requirements Covered
- LIB-04
- LIB-06 (partially - empty state for no matching search results)

## Context
Following the TDD/BDD pattern and the constraints established in CONTEXT.md and RESEARCH.md, we implement the behavior for `tests/features/exercise_search.feature` scenarios.

## Tasks

<task>
1. Add Search Input to `LibraryView`:
   - Add a text input box near the top of the Library tab.
   - Use `use_signal(|| String::new())` to track the search query instantaneously as the user types.
</task>

<task>
2. Filter Exercises dynamically:
   - Derive the list of displayed exercises by filtering the global `WorkoutState` exercises based on the search query.
   - Filtering must be case-insensitive using `String::to_lowercase().contains()`.
   - Update the UI to render only matching exercises instantly (no debouncing needed for MVP).
</task>

<task>
3. Empty State for Search:
   - If the search query is non-empty but the filtered list is empty, show the message "No matching exercises".
</task>

<task>
4. Hook up `@unit` tests in `exercise_search_bdd.rs`:
   - Write step definitions using `wasm-bindgen-test` inside `tests/steps/exercise_search_steps.rs`.
   - Simulate typing in the search box and assert that the correct DOM nodes appear/disappear according to the search rules.
   - Simulate an invalid search and verify the "No matching exercises" text appears.
</task>

## Verification
- Run `cargo test --test exercise_search_bdd -- --tags @unit`. All scenarios must pass.
- BDD step definitions accurately simulate component state.

## Must Haves
- The search functionality is responsive and matches based on substrings.
- The "No matching exercises" state is distinct from the "No exercises yet" state.
